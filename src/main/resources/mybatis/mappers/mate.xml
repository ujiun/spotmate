<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mate">

	<!-- mateList 가져오기 -->	
	<select id="selectMateList" resultType="MateVo">
		<![CDATA[
				select  u.name,
       				    c.carName,
       				    c.carPicture,
       				    c.carName,
       				    c.carNo,
       				    c.introduce,
       				    s.no mateNo,
				        to_char(s.startDate,'mm.dd') startDate,
        				to_char(s.endDate, 'mm.dd') endDate,
				        s.people,
				        s.type,
				        s.point,
				        s.duration,
					    s.distance,
					    s.comments
				from users u,
				     car c,
				     spotmate s
				where u.no = c.userNo
				and   c.no = s.carNo
				and s.type = '메이트'
		]]>
	</select>
	
	<!-- mateList 가져오기(옵션) -->	
	<select id="selectMateOptionList" resultType="MateVo">
		<![CDATA[
				select mateNo mateOptionNo,
				       s.detailNo,
				       d.name optionName
				from spotDetail s , detailOption d, spotmate sp
				where s.detailNo = d.no
				and sp.no = s.mateNo
				and sp.type = '메이트'
				and s.detailno = 3
		]]>
	</select>
	
	<!-- mateList 가져오기(장소) -->	
	<select id="selectMatePlaceList" resultType="MateVo">
		<![CDATA[
				select s.place sPlace,
				       e.place ePlace,
				       s.mateNo
				from place s, place e, spotmate sp
				where s.mateNo = e.mateNo
				and sp.no = s.mateNo
				and s.sepplace = '출발지'
				and e.sepplace = '도착지'
				and sp.type = '메이트'
		]]>
	</select>
	
</mapper>


