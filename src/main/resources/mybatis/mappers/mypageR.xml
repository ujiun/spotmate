<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mypageR">

	<insert id="myDriverinsert" parameterType="dlvo">
	
		<selectKey keyProperty="no" resultType="int" order="BEFORE">
			select seq_car_no.nextval from dual
		</selectKey>
		
	<![CDATA[
	
		insert all
		into car
		values(
				#{no}
		        6,
		        #{c_Model},
		        '',
		        #{carnum},
		        #{c_color},
		        #{num_PA},
		        #{introduce}
		        ) 

		]]>
		 <if test='ch_type1 != null'>
			into carDetail
			values (
				seq_carDetail_no.nextval,
				#{no},
				1
			)
		</if>
			<if test='ch_type2 != null'>
			into carDetail
			values (
				seq_carDetail_no.nextval,
				#{no},
				2
			)
			</if>
			<if test='ch_type3 != null'>
			into carDetail
			values (
				seq_carDetail_no.nextval,
				#{no},
				3
			)
			</if>
			<if test='ch_type4 != null'>
			into carDetail
			values (
				seq_carDetail_no.nextval,
				#{no},
				4
			)
			</if>
			<if test='ch_type5 != null'>
			into carDetail
			values (
				seq_carDetail_no.nextval,
				#{no},
				5
			)
			</if> 
			
	</insert>
		
			
			
			
			
			

	<update id="myDriverUpdate" parameterType="dlvo">
	<![CDATA[
		update  users
	 	set 
	 		licenseNo = #{dl},
	 		licenseType = #{licensetype}
	 	where no = 4 
		]]>
	</update>



</mapper>
