<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="spotmate">

	<select id="list" resultType="com.spotmate.vo.UserVo">
		select no,
			id,
			pw,
			name,
			email,
			phone,
			address,
			gender,
			birth,
			licenseno licenseNo, 
			licensetype licenseType
		from users
	       order by no desc
	</select>
	
	<select id="select" resultType="DWVo">
		select type,
			sdate,
			splace,
			eplace,
			fare,
			people
		from dwv
	</select>
	
	<insert id="carpoolinsert" parameterType="DWVo">
			insert into dwv
			values ( 
				#{type},
				#{sdate},
				#{edate},
				#{stime},
				#{splace},
				#{eplace},
				#{fare},
				#{people},
				#{slat},
				#{slng},
				#{elat},
				#{elng},
				#{latlng},
				#{dur},
				#{dis},
				#{introduce},
				#{comments},
				1,
				#{nosmoke}||' '||
				#{phonecharge}||' '||
				#{drivergender}||' '||
				#{silence}||' '||
				#{pet}
			)
		</insert>
		<insert id="hitchinsert" parameterType="DWVo">
			insert into dwv
			values ( 
				#{type},
				#{sdate},
				#{sdate},
				#{stime},
				#{splace},
				#{eplace},
				#{fare},
				#{people},
				#{slat},
				#{slng},
				#{elat},
				#{elng},
				#{latlng},
				#{dur},
				#{dis},
				#{introduce},
				#{comments},
				1,
				#{nosmoke}||' '||
				#{phonecharge}||' '||
				#{drivergender}||' '||
				#{silence}||' '||
				#{pet}
			)
		</insert>
		
		<insert id="mateinsert" parameterType="mwVo">
		
			<selectKey keyProperty="no" resultType="int" order="BEFORE">
				select seq_spotmate_no.nextval from dual 
			</selectKey>
			
			insert all
			
			into spotmate
			values (
				#{no},
				1,
				#{sdate1}||' '||#{stime1},
				#{edate1},
				#{people},
				#{type},
				#{intfare},
				'',
				'',
				#{comments}
			)
			into spotmateDetail
			values (
				seq_spotmateDetail_no.nextval,
				#{no},
				1
			)
			into place values (
				seq_place_no.nextval,
				#{no},
				#{day1},
				0,
				'출발지1',
				#{stime1},
				#{splace1},
				#{slat1},
				#{slng1},
				#{latlng1}
			)
			<if test='wplace11 != null'>
			into place 
			values (
				seq_place_no.nextval,
				#{no},
				#{day1},
				1,
				'1번 경유지',
				#{wtime11},
				#{wplace11},
				#{wlat11},
				#{wlng11},
				''
			)
			
			</if>
			
			<if test='wplace12 != null'>
			into place 
			values (
				seq_place_no.nextval,
				#{no},
				#{day1},
				2,
				'2번 경유지',
				#{wtime12},
				#{wplace12},
				#{wlat12},
				#{wlng12},
				''
			)
			</if>
			
			<if test='wplace13 != null'>
			into place 
			values (
				seq_place_no.nextval,
				#{no},
				#{day1},
				3,
				'3번 경유지',
				#{wtime13},
				#{wplace13},
				#{wlat13},
				#{wlng13},
				''
			)
			</if>
			
			<if test='wplace14 != null'>
			into place 
			values (
				seq_place_no.nextval,
				#{no},
				#{day1},
				4,
				'4번 경유지',
				#{wtime14},
				#{wplace14},
				#{wlat14},
				#{wlng14},
				''
			)
			</if>
			
			<if test='wplace15 != null'>
			into place 
			values (
				seq_place_no.nextval,
				#{no},
				#{day1},
				5,
				'5번 경유지',
				#{wtime15},
				#{wplace15},
				#{wlat15},
				#{wlng15},
				''
			)
			</if>
			
			into place 
			values (
				seq_place_no.nextval,
				#{no},
				#{day1},
				6,
				'도착지1',
				'',
				#{eplace1},
				#{elat1},
				#{elng1},
				''
			)
			
			<if test='splace2 != null'>
			into place 
			values (
				seq_place_no.nextval,
				#{no},
				#{day2},
				0,
				'출발지2',
				#{stime2},
				#{splace2},
				#{slat2},
				#{slng2},
				#{latlng2}
			)
			</if>
			
			<if test='wplace21 != null'>
			into place 
			values (
				seq_place_no.nextval,
				#{no},
				#{day2},
				1,
				'1번 경유지',
				#{wtime21},
				#{wplace21},
				#{wlat21},
				#{wlng21},
				''
			)
			</if>
			
			<if test='wplace22 != null'>
			into place 
			values (
				seq_place_no.nextval,
				#{no},
				#{day2},
				2,
				'2번 경유지',
				#{wtime22},
				#{wplace22},
				#{wlat22},
				#{wlng22},
				''
			)
			</if>
			
			<if test='wplace23 != null'>
			into place 
			values (
				seq_place_no.nextval,
				#{no},
				#{day2},
				3,
				'3번 경유지',
				#{wtime23},
				#{wplace23},
				#{wlat23},
				#{wlng23},
				''
			)
			</if>
			
			<if test='wplace24 != null'>
			into place 
			values (
				seq_place_no.nextval,
				#{no},
				#{day2},
				4,
				'4번 경유지',
				#{wtime24},
				#{wplace24},
				#{wlat24},
				#{wlng24},
				''
			)
			</if>
			
			
			<if test='wplace25 != null'>
			into place 
			values (
				seq_place_no.nextval,
				#{no},
				#{day2},
				5,
				'5번 경유지',
				#{wtime25},
				#{wplace25},
				#{wlat25},
				#{wlng25},
				''
			)
			</if>
			
			<if test='eplace2 != null'>
			into place 
			values (
				seq_place_no.nextval,
				#{no},
				#{day2},
				6,
				'도착지2',
				'',
				#{eplace2},
				#{elat2},
				#{elng2},
				''
			)
			</if>
			
			
			<if test='splace3 != null'>
			into place 
			values (
				seq_place_no.nextval,
				#{no},
				#{day3},
				0,
				'출발지3',
				#{stime3},
				#{splace3},
				#{slat3},
				#{slng3},
				#{latlng3}
			)
			</if>
			
			<if test='wplace31 != null'>
			into place 
			values (
				seq_place_no.nextval,
				#{no},
				#{day3},
				1,
				'1번 경유지',
				#{wtime31},
				#{wplace31},
				#{wlat31},
				#{wlng31},
				''
			)
			</if>
			
			<if test='wplace32 != null'>
			into place 
			values (
				seq_place_no.nextval,
				#{no},
				#{day3},
				2,
				'2번 경유지',
				#{wtime32},
				#{wplace32},
				#{wlat32},
				#{wlng32},
				''
			)
			</if>
			
			<if test='wplace33 != null'>
			into place 
			values (
				seq_place_no.nextval,
				#{no},
				#{day3},
				3,
				'3번 경유지',
				#{wtime33},
				#{wplace33},
				#{wlat33},
				#{wlng33},
				''
			)
			</if>
			
			<if test='wplace34 != null'>
			into place 
			values (
				seq_place_no.nextval,
				#{no},
				#{day3},
				4,
				'4번 경유지',
				#{wtime34},
				#{wplace34},
				#{wlat34},
				#{wlng34},
				''
			)
			</if>
			
			<if test='wplace35 != null'>
			into place 
			values (
				seq_place_no.nextval,
				#{no},
				#{day3},
				5,
				'5번 경유지',
				#{wtime35},
				#{wplace35},
				#{wlat35},
				#{wlng35},
				''
			)
			</if>
			
			<if test='eplace3 != null'>
			into place 
			values (
				seq_place_no.nextval,
				#{no},
				#{day3},
				6,
				'도착지3',
				'',
				#{eplace3},
				#{elat3},
				#{elng3},
				''
			)
			</if>
			
			<if test='splace4 != null'>
			into place 
			values (
				seq_place_no.nextval,
				#{no},
				#{day4},
				0,
				'출발지4',
				#{stime4},
				#{splace4},
				#{slat4},
				#{slng4},
				#{latlng4}
			)
			</if>
			
			<if test='wplace41 != null'>
			into place 
			values (
				seq_place_no.nextval,
				#{no},
				#{day4},
				1,
				'1번 경유지',
				#{wtime41},
				#{wplace41},
				#{wlat41},
				#{wlng41}
			)
			</if>
			
			<if test='wplace42 != null'>
			into place 
			values (
				seq_place_no.nextval,
				#{no},
				#{day4},
				2,
				'2번 경유지',
				#{wtime42},
				#{wplace42},
				#{wlat42},
				#{wlng42},
				''
			)
			</if>
			
			<if test='wplace43 != null'>
			into place 
			values (
				seq_place_no.nextval,
				#{no},
				#{day4},
				3,
				'3번 경유지',
				#{wtime43},
				#{wplace43},
				#{wlat43},
				#{wlng43},
				''
			)
			</if>
			
			
			<if test='wplace44 != null'>
			into place 
			values (
				seq_place_no.nextval,
				#{no},
				#{day4},
				4,
				'4번 경유지',
				#{wtime44},
				#{wplace44},
				#{wlat44},
				#{wlng44},
				''
			)
			</if>
			
			<if test='wplace45 != null'>
			into place 
			values (
				seq_place_no.nextval,
				#{no},
				#{day4},
				5,
				'5번 경유지',
				#{wtime45},
				#{wplace45},
				#{wlat45},
				#{wlng45},
				''
			)
			</if>
			
			<if test='eplace4 != null'>
			 into place 
			values (
				seq_place_no.nextval,
				#{no},
				#{day4},
				6,
				'도착지4',
				'',
				#{eplace4},
				#{elat4},
				#{elng4},
				''
			)
			</if>
			
			
			<if test='splace5 != null'>
			 into place 
			values (
				seq_place_no.nextval,
				#{no},
				#{day5},
				0,
				'출발지5',
				#{stime5},
				#{splace5},
				#{slat5},
				#{slng5},
				#{latlng5}
			)
			</if>
			
			<if test='wplace51 != null'>
			 into place 
			values (
				seq_place_no.nextval,
				#{no},
				#{day5},
				1,
				'1번 경유지',
				#{wtime51},
				#{wplace51},
				#{wlat51},
				#{wlng51},
				''
			)
			</if>
			
			
			<if test='wplace52 != null'>
			 into place 
			values (
				seq_place_no.nextval,
				#{no},
				#{day5},
				2,
				'2번 경유지',
				#{wtime52},
				#{wplace52},
				#{wlat52},
				#{wlng52},
				''
			)
			</if>
			
			<if test='wplace53 != null'>
			 into place 
			values (
				seq_place_no.nextval,
				#{no},
				#{day5},
				3,
				'3번 경유지',
				#{wtime53},
				#{wplace53},
				#{wlat53},
				#{wlng53},
				''
			)
			</if>
			
			<if test='wplace54 != null'>
			 into place 
			values (
				seq_place_no.nextval,
				#{no},
				#{day5},
				4,
				'4번 경유지',
				#{wtime54},
				#{wplace54},
				#{wlat54},
				#{wlng54},
				''
			)
			</if>
			
			<if test='wplace55 != null'>
			 into place 
			values (
				seq_place_no.nextval,
				#{no},
				#{day5},
				5,
				'5번 경유지',
				#{wtime55},
				#{wplace55},
				#{wlat55},
				#{wlng55},
				''
			)
			</if>
			
			<if test='eplace5 != null'>
			 into place 
			values (
				seq_place_no.nextval,
				#{no},
				#{day5},
				6,
				'도착지5',
				'',
				#{eplace5},
				#{elat5},
				#{elng5},
				''
			)
			</if>
			
			select *
			from dual
			
			
		
			
		
		
		</insert>
		
		
	

</mapper>